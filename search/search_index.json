{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"LeanUp","text":"<p>A Python package for managing Lean mathematical proof language environments.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>\ud83d\udd27 elan Management: Install and manage the Lean toolchain manager elan with a single command</li> <li>\ud83d\udce6 Repository Management: Install and manage Lean repositories with advanced configuration options</li> <li>\ud83c\udf0d Cross-platform Support: Works on Linux, macOS, and Windows</li> <li>\ud83d\udce6 Easy Installation: Quick setup via <code>pip install leanup</code></li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Check the Quick Start guide to begin using LeanUp.</p>"},{"location":"#command-line-interface","title":"Command Line Interface","text":"<p>LeanUp provides a comprehensive CLI with the following commands:</p>"},{"location":"#main-commands","title":"Main Commands","text":"<ul> <li><code>leanup init</code> - Initialize elan installation</li> <li><code>leanup install [version]</code> - Install Lean toolchain version via elan</li> <li><code>leanup status</code> - Show current status and installed toolchains</li> <li><code>leanup elan &lt;args&gt;</code> - Proxy elan commands</li> </ul>"},{"location":"#repository-management","title":"Repository Management","text":"<ul> <li><code>leanup repo install &lt;repository&gt;</code> - Install Lean repositories with flexible configuration</li> <li><code>leanup repo list</code> - List installed repositories with filtering options</li> </ul>"},{"location":"#repository-install-options","title":"Repository Install Options","text":"<ul> <li><code>--source</code> - Repository source URL (default: https://github.com)</li> <li><code>--branch</code> - Branch or tag to clone</li> <li><code>--force</code> - Replace existing directory</li> <li><code>--dest-dir</code> - Destination directory</li> <li><code>--dest-name</code> - Custom destination name</li> <li><code>--interactive</code> - Interactive configuration mode</li> <li><code>--lake-update</code> - Run lake update after cloning (default: true)</li> <li><code>--lake-build</code> - Run lake build after cloning (default: true)</li> <li><code>--build-packages</code> - Specific packages to build</li> </ul>"},{"location":"#modules","title":"Modules","text":""},{"location":"#cli-module","title":"CLI Module","text":"<p>The <code>leanup.cli</code> module provides the command-line interface:</p> <ul> <li>Main CLI: Core commands for elan management and status monitoring</li> <li>Repository CLI: Commands for managing Lean repositories with advanced options</li> </ul>"},{"location":"#utils-module","title":"Utils Module","text":"<p>The <code>leanup.utils</code> module provides utility functions for the package:</p> <ul> <li><code>execute_command</code>: Execute shell commands with proper error handling and cross-platform support</li> <li><code>setup_logger</code>: Configure a logger with customizable output formats and color support</li> </ul>"},{"location":"#repo-module","title":"Repo Module","text":"<p>The <code>leanup.repo</code> module provides repository management functionality:</p> <ul> <li><code>InstallConfig</code>: Configuration class for repository installation with validation</li> <li><code>RepoManager</code>: Base class for directory and git operations</li> <li><code>LeanRepo</code>: Specialized class for Lean project management with lake support</li> <li><code>ElanManager</code>: Manage elan installation and toolchain operations</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":""},{"location":"getting-started/quickstart/#installation","title":"Installation","text":"<pre><code># Install from PyPI\npip install leanup\n\n# Or clone the repository and install\ngit clone https://github.com/Lean-zh/LeanUp.git\ncd LeanUp\npip install -e .\n</code></pre>"},{"location":"getting-started/quickstart/#basic-usage","title":"Basic Usage","text":""},{"location":"getting-started/quickstart/#initialize-elan","title":"Initialize elan","text":"<pre><code># View help\nleanup --help\n\n# Install elan\nleanup init\n\n# View current status\nleanup status\n</code></pre>"},{"location":"getting-started/quickstart/#install-lean-toolchain","title":"Install Lean Toolchain","text":"<pre><code># Install latest stable Lean toolchain\nleanup install\n\n# Install specific Lean toolchain version\nleanup install v4.14.0\n</code></pre>"},{"location":"getting-started/quickstart/#manage-toolchains","title":"Manage Toolchains","text":"<pre><code># Proxy execute elan commands\nleanup elan --help\nleanup elan toolchain list\nleanup elan toolchain install stable\nleanup elan default stable\n</code></pre>"},{"location":"getting-started/quickstart/#repository-management","title":"Repository Management","text":"<pre><code># Install a repository (format: owner/repo or just repo name)\nleanup repo install leanprover-community/mathlib4\nleanup repo install mathlib4\n\n# Install with specific options\nleanup repo install mathlib4 --branch main --force\n\n# Install to specific directory\nleanup repo install mathlib4 --dest-dir ./my-repos\n\n# Custom destination name\nleanup repo install mathlib4 --dest-name my-mathlib\n\n# Install from custom source\nleanup repo install mathlib4 --source https://gitlab.com\n\n# Control build process\nleanup repo install mathlib4 --lake-update --lake-build\nleanup repo install mathlib4 --no-lake-update --no-lake-build\n\n# Build specific packages\nleanup repo install mathlib4 --build-packages \"REPL,REPL.Main\"\n\n# List installed repositories\nleanup repo list\n\n# List repositories with filter\nleanup repo list --name mathlib\n\n# List repositories in specific directory\nleanup repo list --search-dir /path/to/repos\n\n# Interactive installation\nleanup repo install --interactive\n</code></pre>"},{"location":"getting-started/quickstart/#using-installconfig","title":"Using InstallConfig","text":"<p>The <code>InstallConfig</code> class provides a programmatic way to configure repository installations:</p> <pre><code>from pathlib import Path\nfrom leanup.repo.manager import InstallConfig\n\n# Create installation configuration\nconfig = InstallConfig(\n    suffix=\"leanprover-community/mathlib4\",\n    source=\"https://github.com\",\n    branch=\"main\",\n    dest_dir=Path(\"/path/to/repos\"),\n    dest_name=\"mathlib4_main\",\n    lake_update=True,\n    lake_build=True,\n    build_packages=[\"REPL\", \"REPL.Main\"],\n    override=False\n)\n\n# Check if configuration is valid\nif config.is_valid:\n    print(f\"Will install to: {config.dest_path}\")\n\n# Execute installation\nconfig.install()\n\n# Update configuration\nnew_config = config.update(branch=\"v4.3.0\", override=True)\n</code></pre>"},{"location":"getting-started/quickstart/#using-the-repomanager","title":"Using the RepoManager","text":"<p>The <code>RepoManager</code> class provides functionality for managing directories and git repositories:</p> <pre><code>from leanup.repo.manager import RepoManager\n\n# Create a repo manager\nrepo = RepoManager(\"/path/to/your/directory\")\n\n# Check if it's a git repository\nif repo.is_gitrepo:\n    print(\"This is a git repository\")\n    status = repo.git_status()\n    print(f\"Current branch: {status['branch']}\")\n    print(f\"Is dirty: {status['is_dirty']}\")\n\n# Clone a repository\nsuccess = repo.clone_from(\n    \"https://github.com/owner/repo.git\", \n    branch=\"main\", \n    depth=1\n)\n\n# File operations\nrepo.write_file(\"test.txt\", \"Hello world\")\ncontent = repo.read_file(\"test.txt\")\nrepo.edit_file(\"test.txt\", \"world\", \"universe\", use_regex=False)\n\n# List files and directories\nfiles = repo.list_files(\"*.lean\")\ndirs = repo.list_dirs()\n\n# Execute commands\nstdout, stderr, returncode = repo.execute_command([\"ls\", \"-la\"])\n</code></pre>"},{"location":"getting-started/quickstart/#using-leanrepo-for-lean-projects","title":"Using LeanRepo for Lean Projects","text":"<pre><code>from leanup.repo.manager import LeanRepo\n\n# Create a Lean repo manager\nlean_repo = LeanRepo(\"/path/to/lean/project\")\n\n# Get project information\ninfo = lean_repo.get_project_info()\nprint(f\"Lean version: {info['lean_version']}\")\nprint(f\"Has lakefile.toml: {info['has_lakefile_toml']}\")\nprint(f\"Has lakefile.lean: {info['has_lakefile_lean']}\")\nprint(f\"Has lake-manifest.json: {info['has_lake_manifest']}\")\nprint(f\"Build directory exists: {info['build_dir_exists']}\")\n\n# Lake operations\nlean_repo.lake_init(\"my_project\", \"std\", \"lean\")\nlean_repo.lake_update()\nlean_repo.lake_build(\"MyTarget\")\nlean_repo.lake_env_lean(\"Main.lean\", json=True)\nlean_repo.lake_clean()\nlean_repo.lake_test()\n\n# Install using configuration\nconfig = InstallConfig(\n    suffix=\"leanprover-community/mathlib4\",\n    lake_update=True,\n    lake_build=False\n)\nlean_repo.install(config)\n</code></pre>"},{"location":"zh/","title":"LeanUp","text":"<p>\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406 Lean \u6570\u5b66\u8bc1\u660e\u8bed\u8a00\u73af\u5883\u7684 Python \u5de5\u5177\u3002</p>"},{"location":"zh/#_1","title":"\u529f\u80fd\u7279\u6027","text":"<ul> <li>\ud83d\udd27 elan \u7ba1\u7406: \u5b89\u88c5\u548c\u7ba1\u7406 Lean \u5de5\u5177\u94fe\u7ba1\u7406\u5668 elan</li> <li>\ud83d\udce6 \u4ed3\u5e93\u7ba1\u7406: \u5b89\u88c5\u548c\u7ba1\u7406 Lean \u4ed3\u5e93\uff0c\u652f\u6301\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879</li> <li>\ud83c\udf0d \u8de8\u5e73\u53f0\u652f\u6301: \u652f\u6301 Linux\u3001macOS \u548c Windows</li> <li>\ud83d\udce6 \u7b80\u5355\u6613\u7528: \u901a\u8fc7 <code>pip install leanup</code> \u5feb\u901f\u5b89\u88c5</li> </ul>"},{"location":"zh/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":"<p>\u67e5\u770b\u5feb\u901f\u5f00\u59cb\u6307\u5357\uff0c\u5f00\u59cb\u4f7f\u7528 LeanUp\u3002</p>"},{"location":"zh/#_3","title":"\u547d\u4ee4\u884c\u754c\u9762","text":"<p>LeanUp \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684 CLI\uff0c\u5305\u542b\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>"},{"location":"zh/#_4","title":"\u4e3b\u8981\u547d\u4ee4","text":"<ul> <li><code>leanup init</code> - \u521d\u59cb\u5316 elan \u5b89\u88c5</li> <li><code>leanup install [version]</code> - \u5b89\u88c5 Lean \u5de5\u5177\u94fe\u7248\u672c\uff08\u901a\u8fc7 elan\uff09</li> <li><code>leanup status</code> - \u663e\u793a\u5f53\u524d\u72b6\u6001\u548c\u5df2\u5b89\u88c5\u5de5\u5177\u94fe</li> <li><code>leanup elan &lt;args&gt;</code> - \u4ee3\u7406 elan \u547d\u4ee4</li> </ul>"},{"location":"zh/#_5","title":"\u4ed3\u5e93\u7ba1\u7406","text":"<ul> <li><code>leanup repo install &lt;repository&gt;</code> - \u5b89\u88c5 Lean \u4ed3\u5e93\uff0c\u652f\u6301\u7075\u6d3b\u914d\u7f6e</li> <li><code>leanup repo list</code> - \u5217\u51fa\u5df2\u5b89\u88c5\u7684\u4ed3\u5e93\uff0c\u652f\u6301\u8fc7\u6ee4\u9009\u9879</li> </ul>"},{"location":"zh/#_6","title":"\u4ed3\u5e93\u5b89\u88c5\u9009\u9879","text":"<ul> <li><code>--source</code> - \u4ed3\u5e93\u6e90 URL\uff08\u9ed8\u8ba4\uff1ahttps://github.com\uff09</li> <li><code>--branch</code> - \u8981\u514b\u9686\u7684\u5206\u652f\u6216\u6807\u7b7e</li> <li><code>--force</code> - \u66ff\u6362\u73b0\u6709\u76ee\u5f55</li> <li><code>--dest-dir</code> - \u76ee\u6807\u76ee\u5f55</li> <li><code>--dest-name</code> - \u81ea\u5b9a\u4e49\u76ee\u6807\u540d\u79f0</li> <li><code>--interactive</code> - \u4ea4\u4e92\u5f0f\u914d\u7f6e\u6a21\u5f0f</li> <li><code>--lake-update</code> - \u514b\u9686\u540e\u8fd0\u884c lake update\uff08\u9ed8\u8ba4\uff1atrue\uff09</li> <li><code>--lake-build</code> - \u514b\u9686\u540e\u8fd0\u884c lake build\uff08\u9ed8\u8ba4\uff1atrue\uff09</li> <li><code>--build-packages</code> - \u8981\u6784\u5efa\u7684\u7279\u5b9a\u5305</li> </ul>"},{"location":"zh/#_7","title":"\u6a21\u5757","text":""},{"location":"zh/#cli","title":"CLI \u6a21\u5757","text":"<p><code>leanup.cli</code> \u6a21\u5757\u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u754c\u9762\uff1a</p> <ul> <li>\u4e3b CLI: elan \u7ba1\u7406\u548c\u72b6\u6001\u76d1\u63a7\u7684\u6838\u5fc3\u547d\u4ee4</li> <li>\u4ed3\u5e93 CLI: \u7ba1\u7406 Lean \u4ed3\u5e93\u7684\u547d\u4ee4\uff0c\u652f\u6301\u9ad8\u7ea7\u9009\u9879</li> </ul>"},{"location":"zh/#utils","title":"Utils \u6a21\u5757","text":"<p><code>leanup.utils</code> \u6a21\u5757\u63d0\u4f9b\u4e86\u5305\u7684\u5b9e\u7528\u51fd\u6570\uff1a</p> <ul> <li><code>execute_command</code>: \u6267\u884c shell \u547d\u4ee4\uff0c\u5177\u6709\u9002\u5f53\u7684\u9519\u8bef\u5904\u7406\u548c\u8de8\u5e73\u53f0\u652f\u6301</li> <li><code>setup_logger</code>: \u914d\u7f6e\u65e5\u5fd7\u8bb0\u5f55\u5668\uff0c\u652f\u6301\u81ea\u5b9a\u4e49\u8f93\u51fa\u683c\u5f0f\u548c\u989c\u8272</li> </ul>"},{"location":"zh/#repo","title":"Repo \u6a21\u5757","text":"<p><code>leanup.repo</code> \u6a21\u5757\u63d0\u4f9b\u4e86\u4ed3\u5e93\u7ba1\u7406\u529f\u80fd\uff1a</p> <ul> <li><code>InstallConfig</code>: \u4ed3\u5e93\u5b89\u88c5\u7684\u914d\u7f6e\u7c7b\uff0c\u652f\u6301\u9a8c\u8bc1</li> <li><code>RepoManager</code>: \u76ee\u5f55\u548c git \u64cd\u4f5c\u7684\u57fa\u7840\u7c7b</li> <li><code>LeanRepo</code>: \u4e13\u95e8\u7528\u4e8e Lean \u9879\u76ee\u7ba1\u7406\u7684\u7c7b\uff0c\u652f\u6301 lake \u64cd\u4f5c</li> <li><code>ElanManager</code>: \u7ba1\u7406 elan \u5b89\u88c5\u548c\u5de5\u5177\u94fe\u64cd\u4f5c</li> </ul>"},{"location":"zh/getting-started/quickstart/","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"zh/getting-started/quickstart/#_2","title":"\u5b89\u88c5","text":"<pre><code># \u4ece PyPI \u5b89\u88c5\npip install leanup\n\n# \u6216\u8005\u514b\u9686\u4ed3\u5e93\u540e\u5b89\u88c5\ngit clone https://github.com/Lean-zh/LeanUp.git\ncd LeanUp\npip install -e .\n</code></pre>"},{"location":"zh/getting-started/quickstart/#_3","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"zh/getting-started/quickstart/#elan","title":"\u521d\u59cb\u5316 elan","text":"<pre><code># \u67e5\u770b\u5e2e\u52a9\nleanup --help\n\n# \u5b89\u88c5 elan\nleanup init\n\n# \u67e5\u770b\u5f53\u524d\u72b6\u6001\nleanup status\n</code></pre>"},{"location":"zh/getting-started/quickstart/#lean","title":"\u5b89\u88c5 Lean \u5de5\u5177\u94fe","text":"<pre><code># \u5b89\u88c5\u6700\u65b0\u7a33\u5b9a\u7248 Lean \u5de5\u5177\u94fe\nleanup install\n\n# \u5b89\u88c5\u7279\u5b9a\u7248\u672c\u7684 Lean \u5de5\u5177\u94fe\nleanup install v4.14.0\n</code></pre>"},{"location":"zh/getting-started/quickstart/#_4","title":"\u7ba1\u7406\u5de5\u5177\u94fe","text":"<pre><code># \u4ee3\u7406\u6267\u884c elan \u547d\u4ee4\nleanup elan --help\nleanup elan toolchain list\nleanup elan toolchain install stable\nleanup elan default stable\n</code></pre>"},{"location":"zh/getting-started/quickstart/#_5","title":"\u4ed3\u5e93\u7ba1\u7406","text":"<pre><code># \u5b89\u88c5\u4ed3\u5e93\uff08\u683c\u5f0f\uff1aowner/repo \u6216\u4ec5\u4ed3\u5e93\u540d\uff09\nleanup repo install leanprover-community/mathlib4\nleanup repo install mathlib4\n\n# \u4f7f\u7528\u7279\u5b9a\u9009\u9879\u5b89\u88c5\nleanup repo install mathlib4 --branch main --force\n\n# \u5b89\u88c5\u5230\u6307\u5b9a\u76ee\u5f55\nleanup repo install mathlib4 --dest-dir ./my-repos\n\n# \u81ea\u5b9a\u4e49\u76ee\u6807\u540d\u79f0\nleanup repo install mathlib4 --dest-name my-mathlib\n\n# \u4ece\u81ea\u5b9a\u4e49\u6e90\u5b89\u88c5\nleanup repo install mathlib4 --source https://gitlab.com\n\n# \u63a7\u5236\u6784\u5efa\u8fc7\u7a0b\nleanup repo install mathlib4 --lake-update --lake-build\nleanup repo install mathlib4 --no-lake-update --no-lake-build\n\n# \u6784\u5efa\u7279\u5b9a\u5305\nleanup repo install mathlib4 --build-packages \"REPL,REPL.Main\"\n\n# \u5217\u51fa\u5df2\u5b89\u88c5\u7684\u4ed3\u5e93\nleanup repo list\n\n# \u4f7f\u7528\u8fc7\u6ee4\u5668\u5217\u51fa\u4ed3\u5e93\nleanup repo list --name mathlib\n\n# \u5728\u6307\u5b9a\u76ee\u5f55\u4e2d\u5217\u51fa\u4ed3\u5e93\nleanup repo list --search-dir /path/to/repos\n\n# \u4ea4\u4e92\u5f0f\u5b89\u88c5\nleanup repo install --interactive\n</code></pre>"},{"location":"zh/getting-started/quickstart/#installconfig","title":"\u4f7f\u7528 InstallConfig","text":"<p><code>InstallConfig</code> \u7c7b\u63d0\u4f9b\u4e86\u7f16\u7a0b\u65b9\u5f0f\u914d\u7f6e\u4ed3\u5e93\u5b89\u88c5\uff1a</p> <pre><code>from pathlib import Path\nfrom leanup.repo.manager import InstallConfig\n\n# \u521b\u5efa\u5b89\u88c5\u914d\u7f6e\nconfig = InstallConfig(\n    suffix=\"leanprover-community/mathlib4\",\n    source=\"https://github.com\",\n    branch=\"main\",\n    dest_dir=Path(\"/path/to/repos\"),\n    dest_name=\"mathlib4_main\",\n    lake_update=True,\n    lake_build=True,\n    build_packages=[\"REPL\", \"REPL.Main\"],\n    override=False\n)\n\n# \u68c0\u67e5\u914d\u7f6e\u662f\u5426\u6709\u6548\nif config.is_valid:\n    print(f\"\u5c06\u5b89\u88c5\u5230: {config.dest_path}\")\n\n# \u6267\u884c\u5b89\u88c5\nconfig.install()\n\n# \u66f4\u65b0\u914d\u7f6e\nnew_config = config.update(branch=\"v4.3.0\", override=True)\n</code></pre>"},{"location":"zh/getting-started/quickstart/#repomanager","title":"\u4f7f\u7528 RepoManager","text":"<p><code>RepoManager</code> \u7c7b\u63d0\u4f9b\u4e86\u7ba1\u7406\u76ee\u5f55\u548c git \u4ed3\u5e93\u7684\u529f\u80fd\uff1a</p> <pre><code>from leanup.repo.manager import RepoManager\n\n# \u521b\u5efa\u4ed3\u5e93\u7ba1\u7406\u5668\nrepo = RepoManager(\"/path/to/your/directory\")\n\n# \u68c0\u67e5\u662f\u5426\u4e3a git \u4ed3\u5e93\nif repo.is_gitrepo:\n    print(\"\u8fd9\u662f\u4e00\u4e2a git \u4ed3\u5e93\")\n    status = repo.git_status()\n    print(f\"\u5f53\u524d\u5206\u652f: {status['branch']}\")\n    print(f\"\u662f\u5426\u6709\u4fee\u6539: {status['is_dirty']}\")\n\n# \u514b\u9686\u4ed3\u5e93\nsuccess = repo.clone_from(\n    \"https://github.com/owner/repo.git\", \n    branch=\"main\", \n    depth=1\n)\n\n# \u6587\u4ef6\u64cd\u4f5c\nrepo.write_file(\"test.txt\", \"Hello world\")\ncontent = repo.read_file(\"test.txt\")\nrepo.edit_file(\"test.txt\", \"world\", \"universe\", use_regex=False)\n\n# \u5217\u51fa\u6587\u4ef6\u548c\u76ee\u5f55\nfiles = repo.list_files(\"*.lean\")\ndirs = repo.list_dirs()\n\n# \u6267\u884c\u547d\u4ee4\nstdout, stderr, returncode = repo.execute_command([\"ls\", \"-la\"])\n</code></pre>"},{"location":"zh/getting-started/quickstart/#leanrepo-lean","title":"\u4f7f\u7528 LeanRepo \u7ba1\u7406 Lean \u9879\u76ee","text":"<pre><code>from leanup.repo.manager import LeanRepo\n\n# \u521b\u5efa Lean \u4ed3\u5e93\u7ba1\u7406\u5668\nlean_repo = LeanRepo(\"/path/to/lean/project\")\n\n# \u83b7\u53d6\u9879\u76ee\u4fe1\u606f\ninfo = lean_repo.get_project_info()\nprint(f\"Lean \u7248\u672c: {info['lean_version']}\")\nprint(f\"\u6709 lakefile.toml: {info['has_lakefile_toml']}\")\nprint(f\"\u6709 lakefile.lean: {info['has_lakefile_lean']}\")\nprint(f\"\u6709 lake-manifest.json: {info['has_lake_manifest']}\")\nprint(f\"\u6784\u5efa\u76ee\u5f55\u5b58\u5728: {info['build_dir_exists']}\")\n\n# Lake \u64cd\u4f5c\nlean_repo.lake_init(\"my_project\", \"std\", \"lean\")\nlean_repo.lake_update()\nlean_repo.lake_build(\"MyTarget\")\nlean_repo.lake_env_lean(\"Main.lean\", json=True)\nlean_repo.lake_clean()\nlean_repo.lake_test()\n\n# \u4f7f\u7528\u914d\u7f6e\u5b89\u88c5\nconfig = InstallConfig(\n    suffix=\"leanprover-community/mathlib4\",\n    lake_update=True,\n    lake_build=False\n)\nlean_repo.install(config)\n</code></pre>"}]}